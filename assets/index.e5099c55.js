var y=Object.defineProperty,x=Object.defineProperties;var _=Object.getOwnPropertyDescriptors;var d=Object.getOwnPropertySymbols;var I=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable;var f=(a,e,n)=>e in a?y(a,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[e]=n,m=(a,e)=>{for(var n in e||(e={}))I.call(e,n)&&f(a,n,e[n]);if(d)for(var n of d(e))T.call(e,n)&&f(a,n,e[n]);return a},b=(a,e)=>x(a,_(e));var p=(a,e,n)=>new Promise((i,t)=>{var s=r=>{try{o(n.next(r))}catch(c){t(c)}},l=r=>{try{o(n.throw(r))}catch(c){t(c)}},o=r=>r.done?i(r.value):Promise.resolve(r.value).then(s,l);o((n=n.apply(a,e)).next())});import{am as w,k as S,bS as v,b as C,j as O,o as D,G as E,Q as h,D as u,bu as F,h as M,F as j}from"./vendor.1de287a7.js";import{D as q}from"./dynamic-table.96d276c6.js";import{y as g,J as k,K as B}from"./index.57f23076.js";function K(){return g({url:k.list,method:"get"})}function N(a){return g({url:k.kick,method:"post",data:a})}const R=(a={})=>{const e=B().client,n=new Map,i=()=>{Object.keys(a).forEach(s=>{if(e){const l=a[s];n.set(s,l),e.subscribe(s,l)}})},t=()=>{Object.keys(a).forEach(s=>{e&&n.has(s)&&e.unsubscribe(s,n.get(s))})};w(()=>e,i),S(i),v(t)},U={name:"SystemMonitorOnline"};var P=C(b(m({},U),{setup(a){const e=O();R({connect(){var t;(t=e.value)==null||t.refreshTable()},online(){var t;(t=e.value)==null||t.refreshTable()},offline(){var t;(t=e.value)==null||t.refreshTable()}});const n=[{title:"#",dataIndex:"id",width:80,align:"center",hideInSearch:!0},{title:"\u7528\u6237\u540D",dataIndex:"username",align:"center",bodyCell:({record:t})=>u(j,null,[u("span",{class:"pr-16px"},[t.username]),t.isCurrent&&u(F,{color:"red"},{default:()=>[M("\u5F53\u524D")]})])},{title:"\u767B\u5F55IP",dataIndex:"ip",width:140,align:"center"},{title:"\u767B\u5F55\u65F6\u95F4",dataIndex:"time",align:"center"},{title:"\u64CD\u4F5C\u7CFB\u7EDF",dataIndex:"os",align:"center"},{title:"\u6D4F\u89C8\u5668",dataIndex:"browser",align:"center"},{title:"\u64CD\u4F5C",dataIndex:"$action",align:"center",actions:({record:t})=>[{label:"\u4E0B\u7EBF",auth:"sys.online.kick",disabled:t.disable,popConfirm:{title:"\u786E\u5B9A\u4E0B\u7EBF\u8BE5\u7528\u6237\u5417?",onConfirm:()=>i(t)}}]}],i=t=>p(this,null,function*(){yield N({id:t.id})});return(t,s)=>(D(),E(h(q),{ref_key:"dynamicTableRef",ref:e,"header-title":"\u5728\u7EBF\u7528\u6237","title-tooltip":"\u8FD9\u662F\u771F\u5B9E\u64CD\u4F5C\uFF0C\u8BF7\u4E0D\u8981\u968F\u610F\u5C06\u5176\u4ED6\u7528\u6237\u8E22\u4E0B\u7EBF\u3002","data-request":h(K),columns:n},null,8,["data-request"]))}}));export{P as default};
